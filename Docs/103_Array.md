# 배열과 반복 연산

- Starlit에서 배열과 이를 다룰 수 있는 반복 연산에 대해 정리한 문서

## 1. 배열의 선언

- ~~아직까지 전역변수 배열 초기화 기능이 따로 정의되어 있지 않아 문제가 되고 있다.~~

### 1.1. 배열의 선언(초기화x)

- 전역변수 또는 지역변수 모두 가능하다.

`#a():int[10]` : 크기가 10인 정수형 배열을 선언

### 1.2. 배열의 선언 및 초기화

- 지역변수만 사용 가능하다.

`#b(int(0, 3, 2, 6, 4, 9, 7, 8, 1, 5)):int[10]` : 크기가 10인 정수형 배열을 선언과 동시에 초기화.

### 1.3. 2차원 배열

- LED Matrix를 제어하기 위해 2차원 배열을 다룰 수 있으면 더욱 좋다.

`#image():int[8, 8];` : 8*8 크기의 2차원 배열 선언(초기화가 다소 까다롭긴 하다.)

## 2. 반복 연산

- 배열의 쉬운 사용을 위해 반복 연산을 제공하며, 이를 응용해 배열뿐 아니라 여러 분야에 활용할 수 있다.(거의 배열 여러개 동시에 사용할 때 쓰긴 한다.)

### 2.1. 매개변수 없는 반복 연산

- `시작점:종점` : 시작점부터 종점까지 1씩 증가하면서 실행한다.
- 예1 : `a = 0`으로 초기화해놓고, `a += 1:10`이라고 쓰면 a에 1부터 10까지 더한 값이 저장된다.
- 예2 : `6!`를 구하기 위해 간단히 `a=1`로 초기화해놓고 `a*=1:6`으로 연산하면 된다.
- 예3 : 크기가 10인 배열 b에 크기가 10인 배열 a를 복제하기 위해 `b[0:9] = a[0:9]`라고 적을 수 있다.[^예외]

### 2.2. 매개변수 있는 반복 연산

- 반복 매개변수를 2개 이상 써야 하는 경우 주로 사용한다.
- 예1 : 1부터 10까지 각각 제곱을 합하기 위해 `a += i:1:10 * i`라고 적을 수 있다. 반대로 적어도 마찬가지
- 예2 : 배열 C에 배열 A와 배열 B의 합을 저장하기 위해 `C[i:0:9] = A[i] + B[i]`로 적을 수 있다. 이때, C, A, B는 크기가 10으로 같은 배열이다.
- 예3 : 내가 원하는 이미지를 저장하기 위해 반복 연산을 적극적으로 활용할 수 있다.

### 2.3. 반복 연산과 LED Matrix 출력 예제

#### 2.3.1. 간단한 그라데이션

```
$import(oled);
$import(stuimg);


main(){
    OLED = OLED_Black();
    #img():img_t;
    
    img.data[0:2, 0:7, 0:7] = 0;
    
    img.data[1, y:0:7, x:0:7] = x * 32;
    img.data[2, y:0:7, x:0:7] = y * 32;
    
    MATR_Print(_img);
    
    while(!BUTTON_Read()){}
    
    MATR_Clear();
}
```

#### 2.3.2. 원 모양

```
img.data[0:2, y:0:7, x:0:7] = int(127/((x - 3.5) * (x - 3.5) + (y - 3.5) * (y - 3.5)));
```


### 2.3.3. 체크무늬

```
img.data[0, y:0:7, x:0:7] = 255 * ((x + y) % 2);
img.data[2, y:0:7, x:0:7] = 255 * ((x + y + 1) % 2);
```


## 3. 배열의 크기 구하기

- 다른 파일에서 정의된 배열을 사용한다면 크기를 바로 맞추기는 어려울 수도 있으므로 sizeof 연산자를 적극적으로 활용한다.
- `sizeof(int)` : 정수형의 크기를 구한다. 일반적으로 자료형(Class)을 sizeof에 넣어 자료형 자체의 크기를 얻을 수 있다.
- `sizeof(a)` : 변수나 배열의 크기(바이트)를 구한다.
- `sizeof(A) / sizeof(int)` : 배열 A가 정수형으로 정의되었을 때, 배열 A의 크기(칸)를 구할 수 있다. 가장 보편적으로 쓰는 배열 크기 구하는 방법이며, 이를 하나로 묶어서 사용한다면 연산 과정에서 최적화되어 쓰기도 매우 편하다.





[^예외]: 등호 양변에 똑같은 반복 연산이 존재하는 경우 한정으로 쓸 수 있으며, 좌변, 우변에 반복 연산자 개수가 맞지 않으면 오작동할 수 있으니 매개변수 있는 반복 연산 사용이 강력히 권장된다.
