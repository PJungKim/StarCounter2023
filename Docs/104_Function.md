# 함수

- Starlit에서의 함수 정의에 관해 정리한 문서입니다.

## 1. 함수의 정의

```
function(a:int, b:float, c:complex_t):int{
    result = int(a * abs(b + c));
    return(result);
}
```

- `function` : 함수명을 의미합니다. 변수명처럼 숫자나 `_`로 시작하지 않으면서 영어, 숫자, `_`, 한국어 등으로 함수명을 정의할 수 있습니다.[^작명규칙]
- `a:int, b:float, c:complex_t` : 매개변수를 정의합니다. 변수 정의와는 다르게 괄호 없이 정의합니다.
- `:int`(선택) : 출력 유형을 정합니다. 출력을 정하지 않으면 void형으로 출력 없는 함수가 됩니다.
- `return` : 결과를 출력하고 함수를 종료합니다. C에서와는 다르게 반드시 소괄호를 붙여 사용해야 합니다(띄어쓰기 무시 규칙 때문).

## 2. 형변환 함수

- 함수 이름이 클래스의 이름과 정확히 같을 경우 형변환 함수에 자동 편입되며, 자동 형변환이 발생하면 형변환 함수가 자동으로 실행될 수 있습니다.
- 예 : `int(a:complex_t)`라는 함수가 만약에 존재한다면 복소수를 정수로 바꿔주는 기능을 하는 형변환 함수가 됩니다.

## 3. 같은 이름 다른 함수

- Starlit에서는 이름이 같더라도 매개변수가 다르면 다른 함수로 처리합니다.

### 3.1. Fullname

- 함수 자체는 Reference 객체로 분류되며, Reference 객체에 괄호를 붙이면 함수로 실행됩니다(클래스의 속성 제외).
- 매개변수가 다르면 Fullname이 달라 다른 함수가 되는 원리이며, 함수명을 변수처럼 쓴다면 Fullname을 사용해야 합니다.
- Fullname은 함수명$매개변수1의자료형$매개변수2의자료형$...의 형태로 붙습니다.
  - 예 : 1번의 예제의 Fullname은 `function$int$float$complex_t`입니다.
 
### 3.2. 다중 함수

- 2개 이상의 함수를 연달아 정의하는 형태도 하나의 함수로 취급합니다. 다만, GUE 언어와 호환되지 않으며, 반드시 형태를 지켜야 오작동하지 않습니다.
- 예 : `Print(a:ref) with (b:int){...}`라고 정의한다면 사용할 때도 `Print("Hello, World!") with (0xFFFFFF)`와 같은 형태로 써야 하며, 순서를 바꾸거나 형태를 바꾸면 안 됩니다.
- 다중함수는 매개변수를 좀 더 직관적으로 사용할 수 있는 형태이지만, 함수 자체가 매우 길어질 수 있는 단점도 있습니다. 따라서 실질적으로 계수기 코드에서는 제한적으로 사용합니다.
- 다중함수의 모티브도 역시나 Python이라고 합니다. Python에서는 for A in range와 같은 구문이 있었는데, 여기서 모티브를 따와서 만든 구문입니다.

## 4. Starlit Macro

- C언어처럼 다채로운 매크로는 정의되어있지는 않지만, Starlit만의 Macro 규칙이 있어 잘 사용하면 매우 유용하게 쓸 수 있습니다.
- 치환문 : `##레이블(치환내용)` : 특정 구문을 하나의 레이블로 치환합니다. 전역 치환과 지역 치환이 있습니다.
  - `##val((a+3))` : val 자리에 (a+3)으로 치환
- 매크로 함수 : `##레이블{매개변수}(치환내용)` : 매개변수 자체는 중괄호 안에 넣고, 매개변수 자체를 중괄호로 쓰기 때문에 치환 내용에서 오작동을 막기 위해서는 `({매개변수})`와 같이 적어야 합니다.
  - `##Print {text} with {color}(Print3({text}, {color}));` : `Print("TEXT")with(RED)`와 같이 쓸 수 있습니다. 그러면 `Print3("TEXT", RED)`로 변형됩니다. Print3 내부에 중괄호 밖에 소괄호를 안친 것은 단독으로 매개변수로 쓰기 때문입니다.








[^작명규칙]: Starlit에서는 `_`를 앞에 붙이면 레퍼런스를 의미하기 때문에 앞에 `_`를 붙일 수 없는 규칙이 존재합니다.
