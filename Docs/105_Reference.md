# Reference 형

- Starlit에서 Reference에 관한 문서입니다.

## 1. Reference란?

- C/C++에서는 포인터라는 개념이 있으면 Starlit 언어는 포인터라는 개념 대신 사용하는 개념입니다.
- 포인터는 변수의 주소를 의미하는 자료형으로, 각각에 대응하는 자료형이 따로 존재합니다.
- 레퍼런스는 단순히 변수의 주소를 의미하는 개념적인 것입니다.
- 정수형과는 별개의 자료형으로 사용되는데, 함수와 문자열 처리, 그리고 일반적인 의미의 레퍼런스 기능을 모두 수행합니다.

### 1.1. Reference의 용도

- 함수 : 함수 그 자체는 Reference형 상수로 취급하기도 합니다. 주로 메뉴 코드를 작성할 때 실행 함수로써 Reference형으로 정의하기도 합니다.
  - 예 : `#f():ref;`로 정의해 놓고 `f = self.func;`로 함수를 정한 뒤 `f();`를 실행하면 선택한 함수를 실행하기도 합니다.
 
- 문자열 : Reference로 가장 많이 쓰는 유형으로 큰따옴표로 정의된 문자열은 문자열 객체가 아닌 문자열 상수 취급하여 씁니다.
  - 예 : `matrix2.Print("Hello, World!");`에서 큰따옴표로 정의된 문자열은 Reference형의 문자열 상수 취급입니다. 간혹 문자열 변수의 Reference형을 넣기도 하는데, 똑같이 작동합니다.
 
- Reference : 변수 이름 앞에 `_`를 붙여 레퍼런스로 쓸 수 있습니다. `a = 10`이라고 `a`를 정의하면 `_a`는 자동으로 a의 주소를 의미하는 레퍼런스형 상수가 됩니다. 가장 일반적으로 쓰는 Reference의 의미라고 볼 수 있습니다.

## 2. Reference 변수

- Reference 변수는 변수 선언과 동시에 레퍼런스가 선언되어 쓸 수 있는 변수를 의미합니다. 평상시에는 일반 변수처럼 쓸 수는 있으나, 레퍼런스가 유동이기 때문에 잘못 사용하면 레드스크린이 뜰 수 있으니 주의 바랍니다.
  - Reference 변수는 반드시 Reference 주소를 유효한 값으로 정해 놓고 사용합니다.

- `#a():_int`와 같이 정의하면 Reference 변수 a가 선언됩니다. 다만, 이 상태에서는 참조되는 주소가 없으므로 사용할 수 없습니다.
- `a_ = _b;`와 같이 사용하면, a의 레퍼런스값을 b로 저장할 수 있습니다. 이 상태에서는 a값을 바꾸면 b값도 바뀝니다. 그 이유는 a는 b를 참조하는 상태에서 제어하므로 b의 위치를 변경하기 때문입니다.
- Reference 변수는 주로 단독으로 잘 쓰진 않으며, 함수의 매개변수, 함수의 출력, 클래스의 속성 등에 많이 쓰입니다. 즉, 객체 지향 프로그램에서는 Reference 개념이 필수적으로 적용됩니다.

## 3. Call-By-Reference와 Call-By-Value

- 함수를 정의할 때 매개변수에 대해서 `:int`로 선언했다면 매개변수 값을 전달하는 것이므로 `Call-By-Value`가 됩니다.
- 함수를 정의할 때 매개변수에 대해서 `:_int`로 선언하면 Reference 변수이므로 Reference를 전달하게 되며, 이것이 `Call-By-Reference`가 됩니다.
- 예제 : Swap(a, b)
  ```
  Swap(a:_int, b:_int){
      temp = a;
      a = b;
      b = temp;
  }
  ```
- 이 상태로 Swap(var1, var2)를 쓰면 변수 값이 서로 바뀔 것입니다. C언어에서는 반드시 그 앞에 &를 붙여 포인터를 전달했는데, Starlit은 포인터가 아닌 레퍼런스 개념을 사용해 &를 붙이지 않습니다.

## 4. Return-By-Reference와 Return-By-Value

- Return-By-Reference는 생각보다 잘 쓰지는 않지만, 특정 위치를 받은 변수로 사용할 때 사용합니다.
  - Return-By-Reference는 그 자체는 일반 변수처럼 쓰지만, 값 자체는 레퍼런스를 사용한 것이므로 `_()` 연산자를 사용해 레퍼런스 값으로 쓸 수도 있습니다.
  - Return-By-Reference는 일반적으로 특정 변수를 지칭하거나, Call-By-Reference에 입력한 어느 Reference를 출력하는 경우가 많습니다.
  - Return-By-Reference는 출력할 때 return 뒤에는 레퍼런스를 넣어 주어야 합니다. Return-By-Reference이기 때문입니다.

## 5. Reference 변수와 클래스의 속성

- 클래스의 속성을 레퍼런스로 사용하면 사용하지 않을 때보다 메모리를 절감할 수 있으며, 속도 역시 빨라집니다. 자세한 내용은 객체와 클래스에서 다루도록 하겠습니다.




